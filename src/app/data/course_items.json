[{
    "id": "software_engineering_toolkit",
    "type": "course",
    "titles": {
        "en": "Software Engineering Toolkit"
    },
    "descriptions": {
        "en": "Course material for Lab 02 (backend investigation, fixes, feature, deployment)."
    },
    "labs": [
        {
            "id": "lab-02",
            "type": "lab",
            "titles": {
                "en": "Lab 02 â€” Understand, Improve, and Deploy a Backend Service"
            },
            "descriptions": {
                "en": "Run a FastAPI service, fix the /items endpoints, implement /outcomes, and deploy to a VPS."
            },
            "values": {
                "repo_dir": "lab-02-fix-and-deploy-backend",
                "readme_path": "README.md"
            },
            "tasks": [
                {
                    "id": "lab-02-setup",
                    "type": "task",
                    "titles": {
                        "en": "Lab setup"
                    },
                    "descriptions": {
                        "en": "Prepare access and local tooling before coding."
                    },
                    "steps": [
                        {
                            "id": "lab-02-setup-access",
                            "type": "step",
                            "titles": {
                                "en": "Ensure repo access"
                            },
                            "descriptions": {
                                "en": "Ensure the TA and at least one reviewer have access to your repo."
                            }
                        },
                        {
                            "id": "lab-02-setup-clone",
                            "type": "step",
                            "titles": {
                                "en": "Clone the repository"
                            },
                            "descriptions": {
                                "en": "Clone your fork locally."
                            }
                        },
                        {
                            "id": "lab-02-setup-python",
                            "type": "step",
                            "titles": {
                                "en": "Check Python version"
                            },
                            "descriptions": {
                                "en": "Ensure Python 3.10+ is installed."
                            },
                            "values": {
                                "command_hint": "python3 --version"
                            }
                        },
                        {
                            "id": "lab-02-setup-readme",
                            "type": "step",
                            "titles": {
                                "en": "Read the README"
                            },
                            "descriptions": {
                                "en": "Read `README.md` once to understand the flow."
                            }
                        }
                    ]
                },
                {
                    "id": "lab-02-run-local",
                    "type": "task",
                    "titles": {
                        "en": "Run the service locally"
                    },
                    "descriptions": {
                        "en": "Create a venv, install deps with uv, run the service, and verify endpoints."
                    },
                    "steps": [
                        {
                            "id": "lab-02-run-local-venv",
                            "type": "step",
                            "titles": {
                                "en": "Create a virtual environment"
                            },
                            "descriptions": {
                                "en": "Create a venv named `venv`."
	                            },
	                            "values": {
	                                "command_hint": "uv venv venv"
	                            }
	                        },
                        {
                            "id": "lab-02-run-local-activate",
                            "type": "step",
                            "titles": {
                                "en": "Activate the virtual environment"
                            },
                            "descriptions": {
                                "en": "Activate `venv`."
                            },
                            "values": {
                                "command_hint": "source venv/bin/activate"
                            }
                        },
                        {
                            "id": "lab-02-run-local-install",
                            "type": "step",
                            "titles": {
                                "en": "Install dependencies"
                            },
                            "descriptions": {
                                "en": "Install dependencies from `requirements.txt`."
	                            },
	                            "values": {
	                                "command_hint": "uv pip install -r requirements.txt"
	                            }
	                        },
	                        {
	                            "id": "lab-02-run-local-uvicorn",
	                            "type": "step",
	                            "titles": {
	                                "en": "Run the service"
	                            },
	                            "descriptions": {
	                                "en": "Run the service from `src/`."
	                            },
	                            "values": {
	                                "command_hint": "cd src && uv run uvicorn main:app --reload"
	                            }
	                        },
                        {
                            "id": "lab-02-run-local-status",
                            "type": "step",
                            "titles": {
                                "en": "Verify /status"
                            },
                            "descriptions": {
                                "en": "Verify the health endpoint returns OK JSON."
                            },
                            "values": {
                                "command_hint": "curl http://127.0.0.1:8000/status",
                                "expected_hint": "{\"status\":\"ok\",\"service\":\"course-materials\"}"
                            }
                        },
                        {
                            "id": "lab-02-run-local-items",
                            "type": "step",
                            "titles": {
                                "en": "Verify /items"
                            },
                            "descriptions": {
                                "en": "Verify the items endpoints return the nested course structure."
	                            },
	                            "values": {
	                                "command_hint": "curl http://127.0.0.1:8000/items"
	                            }
	                        }
	                    ]
	                },
                {
                    "id": "lab-02-document-bug",
                    "type": "task",
                    "titles": {
                        "en": "Document the /items bug"
                    },
                    "descriptions": {
                        "en": "Investigate unexpected behavior and create a clear bug report."
                    },
                    "steps": [
                        {
                            "id": "lab-02-document-bug-reproduce",
                            "type": "step",
                            "titles": {
                                "en": "Reproduce the bug"
                            },
                            "descriptions": {
                                "en": "Use the `/items` endpoints to reproduce the incorrect behavior and capture evidence."
                            }
                        },
                        {
                            "id": "lab-02-document-bug-expected-actual",
                            "type": "step",
                            "titles": {
                                "en": "Write expected vs actual behavior"
                            },
                            "descriptions": {
                                "en": "Describe what you expected and what you actually observed."
                            }
                        },
                        {
                            "id": "lab-02-document-bug-steps",
                            "type": "step",
                            "titles": {
                                "en": "Add steps to reproduce"
                            },
                            "descriptions": {
                                "en": "Add minimal steps so someone else can reproduce reliably."
                            }
                        }
                    ]
                },
                {
                    "id": "lab-02-fix-items",
                    "type": "task",
                    "titles": {
                        "en": "Fix the /items endpoint"
                    },
                    "descriptions": {
                        "en": "Fix the bug, add/update a test, and deliver via PR."
                    },
                    "steps": [
                        {
                            "id": "lab-02-fix-items-branch",
                            "type": "step",
                            "titles": {
                                "en": "Create a fix branch"
                            },
                            "descriptions": {
                                "en": "Create a branch like `fix/<bug-name>`."
                            }
                        },
                        {
                            "id": "lab-02-fix-items-implement",
                            "type": "step",
                            "titles": {
                                "en": "Implement the fix"
                            },
                            "descriptions": {
                                "en": "Make `/items` return the course item and `/items/{item_id}` return any nested item by id."
                            }
                        },
                        {
                            "id": "lab-02-fix-items-test",
                            "type": "step",
                            "titles": {
                                "en": "Add/update tests"
                            },
                            "descriptions": {
                                "en": "Add/update at least one test under `tests/` to cover the bug."
                            }
                        },
                        {
                            "id": "lab-02-fix-items-pr",
                            "type": "step",
                            "titles": {
                                "en": "Open a PR"
                            },
                            "descriptions": {
                                "en": "Open a PR, link it to the issue, request review, and merge when approved."
                            }
                        }
                    ]
                },
                {
                    "id": "lab-02-outcomes",
                    "type": "task",
                    "titles": {
                        "en": "Implement the Outcomes API"
                    },
                    "descriptions": {
                        "en": "Implement `GET /outcomes` and `GET /outcomes/{outcome_id}` backed by `outcomes.json`."
                    },
                    "steps": [
                        {
                            "id": "lab-02-outcomes-implement",
                            "type": "step",
                            "titles": {
                                "en": "Implement endpoints"
                            },
                            "descriptions": {
                                "en": "Add `GET /outcomes` and `GET /outcomes/{outcome_id}`."
                            }
                        },
                        {
                            "id": "lab-02-outcomes-data",
                            "type": "step",
                            "titles": {
                                "en": "Load outcomes.json"
                            },
                            "descriptions": {
                                "en": "Use `src/app/data/outcomes.json` as the data source."
                            }
                        },
                        {
                            "id": "lab-02-outcomes-tests",
                            "type": "step",
                            "titles": {
                                "en": "Add tests"
                            },
                            "descriptions": {
                                "en": "Add tests under `tests/` for the new endpoints."
                            }
                        }
                    ]
                },
                {
                    "id": "lab-02-deploy",
                    "type": "task",
                    "titles": {
                        "en": "Deploy to a VPS"
                    },
                    "descriptions": {
                        "en": "Deploy the updated service to a Linux server using SSH and Docker Compose (FastAPI + Nginx)."
                    },
                    "steps": [
                        {
                            "id": "lab-02-deploy-connect",
                            "type": "step",
                            "titles": {
                                "en": "Connect to VPS"
                            },
                            "descriptions": {
                                "en": "SSH into the server and verify you can connect and navigate."
                            }
                        },
	                        {
	                            "id": "lab-02-deploy-prepare",
	                            "type": "step",
	                            "titles": {
	                                "en": "Prepare environment"
	                            },
	                            "descriptions": {
	                                "en": "Install Docker + Compose, upload code, and ensure port 80 is open."
	                            },
	                            "values": {
	                                "command_hint": "cd /var/www/myapp && docker compose version"
	                            }
	                        },
	                        {
	                            "id": "lab-02-deploy-run",
	                            "type": "step",
	                            "titles": {
	                                "en": "Run the app (Compose)"
	                            },
	                            "descriptions": {
	                                "en": "Run Docker Compose and verify `http://SERVER_IP/status`."
	                            },
	                            "values": {
	                                "command_hint": "cd /var/www/myapp && docker compose up -d --build"
	                            }
	                        },
	                        {
	                            "id": "lab-02-validate-nginx-config",
	                            "type": "step",
	                            "titles": {
	                                "en": "Validate Nginx config (Compose)"
	                            },
	                            "descriptions": {
	                                "en": "Validate the Nginx config inside the container."
	                            },
	                            "values": {
	                                "command_hint": "cd /var/www/myapp && docker compose exec nginx nginx -t"
	                            }
	                        },
	                        {
	                            "id": "lab-02-debug-deployment",
	                            "type": "step",
	                            "titles": {
	                                "en": "Debug deployment (Compose)"
	                            },
	                            "descriptions": {
	                                "en": "Use `docker compose ps` and logs to debug if something doesn't work."
	                            },
	                            "values": {
	                                "command_hint": "cd /var/www/myapp && docker compose logs --tail=200 nginx"
	                            }
	                        },
                            {
                                "id": "lab-02-deploy-systemd",
                                "type": "step",
                                "titles": {
                                    "en": "Create a systemd service"
                                },
                                "descriptions": {
                                    "en": "Create a systemd unit, enable/start it, and verify it stays running."
                                }
                            }
	                    ]
	                }
            ]
        }
    ]
}]
